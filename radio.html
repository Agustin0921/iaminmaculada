<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Morenita del Valle 104.5 - Con Coraz√≥n Misionero</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="radio-styles.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img/radio-favicon.png">
    <!-- En el <head> de radio.html, agrega esto ANTES de tus scripts -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
      import { getFirestore, setDoc, updateDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
      import { getDatabase, ref, set, update, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        
      // Tu configuraci√≥n de Firebase
      const firebaseConfig = {
          apiKey: "AIzaSyB5oQcEv5anwzjEM5aTNdavYqOBMsx2byE",
          authDomain: "iam-campamento-2026.firebaseapp.com",
          projectId: "iam-campamento-2026",
          storageBucket: "iam-campamento-2026.firebasestorage.app",
          messagingSenderId: "600822219804",
          appId: "1:600822219804:web:3f8345d0e8479592d88bd9"
      };
  
      // Inicializar Firebase
      const firebaseApp = initializeApp(firebaseConfig);
      const firebaseAuth = getAuth(firebaseApp);
      const firebaseDb = getFirestore(firebaseApp);
      const firebaseRTDB = getDatabase(firebaseApp);
  
      // Hacerlas disponibles globalmente
      window.firebaseApp = firebaseApp;
      window.firebaseAuth = firebaseAuth;
      window.firebaseDb = firebaseDb;
      window.firebaseRTDB = firebaseRTDB;
      // Exportar funciones espec√≠ficas
      window.firebaseFunctions = { 
        signInWithEmailAndPassword, 
        signOut,
        setDoc, 
        updateDoc, 
        doc, 
        getDoc, 
        ref, 
        set, 
        update, 
        onValue 
      };
      
      console.log("‚úÖ Firebase Modular cargado correctamente");
    </script>
</head>
<body class="radio-page">
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="nav-brand">
                    <a href="index.html" class="logo">
                        <img class="logo-img" src="img/logo-iam.png" alt="IAM">
                        <div class="logo-text">
                            <h1>IAM</h1>
                            <span>Infancia y Adolescencia Misionera</span>
                        </div>
                    </a>
                </div>

                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>

                <div class="nav-menu" id="mainNav">
                    <ul class="nav-links">
                        <li><a href="index.html" class="nav-link">Inicio IAM</a></li>
                        <li><a href="index.html#sobre-iam" class="nav-link">¬øQu√© es IAM?</a></li>
                        <li><a href="#radio-player" class="nav-link active">Escuchar Radio</a></li>
                        <li><a href="#programa" class="nav-link">Programa IAM</a></li>
                        <li><a href="#juegos" class="nav-link">Juegos en Vivo</a></li>
                        <li><a href="inscripcion.html" class="nav-link">Campamento 2026</a></li>
                    </ul>
                </div>

                <!-- Bot√≥n Admin espec√≠fico para radio -->
                <button class="admin-access-btn" id="radioAdminBtn" title="Acceso Animadores">
                    <i class="fas fa-user-shield"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Encabezado de Radio -->
    <section class="radio-header">
        <div class="container">
            <div class="radio-logo-container">
                <div class="radio-logo">
                    <i class="fas fa-radio" style="font-size: 4rem; color: var(--radio-primary);"></i>
                </div>
                <div class="radio-frequency">
                    <h1>Radio <span>Morenita del Valle</span></h1>
                    <p>104.5 FM - Transmitiendo desde Concepci√≥n, Tucum√°n</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <p style="font-size: 1.2rem; max-width: 800px; margin: 0 auto; opacity: 0.9;">
                    <i class="fas fa-heart" style="color: var(--radio-accent);"></i>
                    La voz de nuestra comunidad cat√≥lica
                </p>
            </div>
            
            <!-- Ondas de radio animadas -->
            <div class="radio-wave"></div>
            <div class="radio-wave"></div>
            <div class="radio-wave"></div>
        </div>
    </section>

    <!-- Contenido Principal -->
    <main class="radio-main-container">
        <!-- Reproductor de Radio -->
        <section id="radio-player" class="radio-player-section">
            <div class="radio-player-header">
                <h2><i class="fas fa-broadcast-tower"></i> Escucha en Vivo</h2>
                <div class="live-badge">
                    <i class="fas fa-circle"></i> EN VIVO
                </div>
            </div>

            <div class="radio-player-main">
                <div class="player-controls">
                    <div class="station-info">
                        <h3>Radio Morenita del Valle</h3>
                        <p>104.5 FM - Concepci√≥n, Tucum√°n</p>
                    </div>

                    <div class="audio-level">
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                        <div class="audio-bar"></div>
                    </div>

                    <div class="volume-control">
                        <label style="display: block; margin-bottom: 10px;">
                            <i class="fas fa-volume-up"></i> Volumen
                        </label>
                        <input type="range" min="0" max="100" value="70" class="volume-slider" id="volumeControl">
                    </div>

                    <div class="main-controls">
                        <button class="control-btn" id="prevBtn" title="Anterior" onclick="skipBack()">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="control-btn play-btn" id="playBtn" title="Reproducir/Pausar" onclick="togglePlay()">
                            <i class="fas fa-play" id="playIcon"></i>
                        </button>
                        <button class="control-btn" id="nextBtn" title="Siguiente" onclick="skipForward()">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <p id="nowPlaying"><i class="fas fa-info-circle"></i> Haz clic en reproducir para escuchar</p>
                    </div>
                </div>

                <!-- Reemplaza la secci√≥n player-streams con esto: -->
                <div class="player-streams">
                    <h4><i class="fas fa-stream"></i> Opciones de Escucha</h4>

                    <div class="stream-option active" data-stream="youtube" onclick="selectStream('youtube')">
                        <div class="stream-icon">
                            <i class="fab fa-youtube"></i>
                        </div>
                        <div class="stream-info">
                            <h5>YouTube Live</h5>
                            <p>Transmisi√≥n en vivo por YouTube</p>
                        </div>
                    </div>
                
                    <div class="stream-option" data-stream="radio" onclick="selectStream('radio')">
                        <div class="stream-icon">
                            <i class="fas fa-radio"></i>
                        </div>
                        <div class="stream-info">
                            <h5>Directo por FM</h5>
                            <p>Escucha la transmisi√≥n en vivo 104.5 FM</p>
                        </div>
                    </div>
                
                    <!-- Reproductor de YouTube integrado (oculto inicialmente) -->
                    <div id="youtubePlayerContainer" style="display: none; margin-top: 20px;">
                        <div style="background: #000; border-radius: 10px; overflow: hidden; position: relative; padding-bottom: 56.25%; height: 0;">
                            <iframe id="youtubeLivePlayer" 
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                    src=""
                                    title="Radio Morenita del Valle - YouTube Live"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                            </iframe>
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: #718096;">
                            <i class="fas fa-info-circle"></i> Reproduciendo en vivo desde YouTube
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Programa "Con Coraz√≥n Misionero" -->
        <section id="programa" class="program-section">
            <div class="program-header">
                <h2><i class="fas fa-microphone-alt"></i> Con Coraz√≥n Misionero</h2>
                <div class="schedule-badge">
                    <i class="fas fa-clock"></i> S√°bados 10:30 - 12:30 hs
                </div>
            </div>

            <div class="program-content">
                <div class="program-image">
                    <div style="width: 100%; height: 300px; background: linear-gradient(135deg, #9C27B0, #BA68C8); border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-microphone-alt" style="font-size: 4rem; margin-bottom: 20px;"></i>
                            <h3 style="color: white; margin-bottom: 10px;">Programa IAM</h3>
                            <p>En vivo todos los s√°bados</p>
                        </div>
                    </div>
                </div>

                <div class="program-details">
                    <h3>El programa de la IAM en la radio</h3>
                    
                    <ul class="program-features">
                        <li><i class="fas fa-child"></i> Hecho por y para ni√±os misioneros</li>
                        <li><i class="fas fa-pray"></i> Oraci√≥n y reflexi√≥n del Evangelio</li>
                        <li><i class="fas fa-music"></i> M√∫sica cat√≥lica infantil</li>
                        <li><i class="fas fa-gamepad"></i> Juegos y concursos en vivo</li>
                        <li><i class="fas fa-phone-alt"></i> Llamadas de los oyentes</li>
                        <li><i class="fas fa-gift"></i> Sorpresas y premios</li>
                    </ul>

                    <div class="program-description">
                        <p>Un espacio creado especialmente para los ni√±os y adolescentes misioneros, donde compartimos la alegr√≠a del Evangelio, aprendemos sobre las misiones y nos divertimos juntos.</p>
                        <p><strong>Conducci√≥n:</strong> Equipo de animadores de la IAM</p>
                        <p><strong>Participa:</strong> Llama al (03865) 42-XXXX durante el programa</p>
                    </div>

                    <button class="btn btn-primary" style="margin-top: 20px; width: 100%;" onclick="window.open('https://www.youtube.com/@radiomorenitadelvalle/videos', '_blank')">
                        <i class="fab fa-youtube"></i> Ver programas anteriores en YouTube
                    </button>
                </div>
            </div>
        </section>

        <!-- Juegos Interactivos -->
        <section id="juegos" class="games-section">
            <div class="games-header">
                <h2><i class="fas fa-gamepad"></i> Juegos Interactivos en Vivo</h2>
                <p>Participa en los juegos durante el programa "Con Coraz√≥n Misionero". Solo el animador puede activar los juegos.</p>
            </div>

            <!-- Panel de control para admin -->
            <div class="admin-control-panel" id="adminPanel" style="display: none;">
                <h3><i class="fas fa-user-shield"></i> Panel de Control del Animador</h3>
                <div class="control-buttons">
                    <button class="admin-btn" id="startGameBtn">
                        <i class="fas fa-play-circle"></i>
                        <span>Iniciar Juego</span>
                    </button>
                    <button class="admin-btn" id="stopGameBtn">
                        <i class="fas fa-stop-circle"></i>
                        <span>Detener Juego</span>
                    </button>
                    <button class="admin-btn" id="resetGameBtn">
                        <i class="fas fa-redo"></i>
                        <span>Reiniciar Juego</span>
                    </button>
                    <button class="admin-btn" id="viewResultsBtn">
                        <i class="fas fa-chart-bar"></i>
                        <span>Ver Resultados</span>
                    </button>
                </div>
                
                <div style="margin-top: 20px; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                    <h4 style="margin-bottom: 10px; color: var(--radio-secondary);">Juego Actual</h4>
                    <p id="currentGameStatus">No hay juego activo</p>
                    <p id="playerCount">Jugadores conectados: 0</p>
                </div>
            </div>

            <button id="joinGameBtn" style="display:none; padding:15px; font-size:1.1rem;">
              üéÆ Unirme al juego
            </button>

            <!-- Juegos disponibles -->
            <div class="games-grid">
                <div class="game-card locked" data-game="quiz">
                    <div class="game-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="game-status locked">
                        <i class="fas fa-lock"></i> BLOQUEADO
                    </div>
                    <h4>Quiz Misionero</h4>
                    <p>Responde preguntas sobre la fe, las misiones y el Evangelio</p>
                    <button class="btn" style="width: 100%; opacity: 0.5;" disabled>
                        Esperando al animador...
                    </button>
                </div>

                <div class="game-card locked" data-game="memory">
                    <div class="game-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="game-status locked">
                        <i class="fas fa-lock"></i> BLOQUEADO
                    </div>
                    <h4>Memoria B√≠blica</h4>
                    <p>Encuentra las parejas de vers√≠culos b√≠blicos</p>
                    <button class="btn" style="width: 100%; opacity: 0.5;" disabled>
                        Esperando al animador...
                    </button>
                </div>

                <div class="game-card locked" data-game="trivia">
                    <div class="game-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="game-status locked">
                        <i class="fas fa-lock"></i> BLOQUEADO
                    </div>
                    <h4>Trivia IAM</h4>
                    <p>Demuestra cu√°nto sabes sobre la Infancia Misionera</p>
                    <button class="btn" style="width: 100%; opacity: 0.5;" disabled>
                        Esperando al animador...
                    </button>
                </div>

                <div class="game-card locked" data-game="wordsearch">
                    <div class="game-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="game-status locked">
                        <i class="fas fa-lock"></i> BLOQUEADO
                    </div>
                    <h4>Sopa de Letras</h4>
                    <p>Encuentra palabras relacionadas con las misiones</p>
                    <button class="btn" style="width: 100%; opacity: 0.5;" disabled>
                        Esperando al animador...
                    </button>
                </div>
            </div>

            <!-- Informaci√≥n para participantes -->
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(42, 110, 187, 0.1); border-radius: 10px;">
                <h4 style="color: var(--radio-primary); margin-bottom: 10px;">
                    <i class="fas fa-info-circle"></i> ¬øC√≥mo participar?
                </h4>
                <p style="color: #4A5568; max-width: 600px; margin: 0 auto;">
                    Los juegos solo se activan durante el programa en vivo. Cuando el animador inicie un juego, 
                    aparecer√° aqu√≠ para que todos puedan participar. ¬°Est√©n atentos los s√°bados de 10:30 a 12:30!
                </p>
                <p style="color: var(--radio-accent); margin-top: 10px; font-weight: 600;">
                    <i class="fas fa-exclamation-triangle"></i> Solo el animador puede iniciar/detener los juegos
                </p>
            </div>
        </section>

        <!-- Oyentes conectados -->
        <div class="current-listeners">
            <div class="listener-count" id="listenerCount">42</div>
            <p>Personas escuchando ahora</p>
            
            <div class="listeners-list" id="listenersList">
                <!-- Se llenar√° autom√°ticamente con JavaScript -->
            </div>
            
            <button class="btn" style="margin-top: 20px; background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.3);" 
                    onclick="showImListening()">
                <i class="fas fa-hand-paper"></i> ¬°Yo tambi√©n estoy escuchando!
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="radio-footer">
        <div class="radio-footer-content">
            <div class="footer-radio-info">
                <h3><i class="fas fa-radio"></i> Radio Morenita del Valle</h3>
                <p>
                    104.5 FM - Transmitiendo desde Concepci√≥n, Tucum√°n<br>
                    La voz cat√≥lica de nuestra comunidad.
                </p>
                
                <div class="social-icons">
                    <a href="https://www.youtube.com/@radiomorenitadelvalle" class="social-icon" target="_blank">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://www.facebook.com/radiomorenitadelvalle" class="social-icon" target="_blank">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/radiomorenitadelvalle" class="social-icon" target="_blank">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://wa.me/5493865123456" class="social-icon" target="_blank">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Contacto</h4>
                <ul class="contact-list">
                    <li><i class="fab fa-youtube"></i> @radiomorenitadelvalle</li>
                    <li><i class="fas fa-phone"></i> (03865) 42-XXXX</li>
                    <li><i class="fas fa-envelope"></i> contacto@radiomorenita.com</li>
                    <li><i class="fas fa-map-marker-alt"></i> Concepci√≥n, Tucum√°n</li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Programaci√≥n Destacada</h4>
                <ul class="footer-links">
                    <li><a href="#programa"><i class="fas fa-chevron-right"></i> Con Coraz√≥n Misionero (S√°b 10:30)</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Santa Misa Diaria (7:00)</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Rosario de la Aurora (6:30)</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> M√∫sica Cat√≥lica 24/7</a></li>
                </ul>
            </div>
        </div>
        
        <div class="radio-footer-bottom">
            <p>&copy; 2025 Radio Morenita del Valle 104.5 FM - Todos los derechos reservados</p>
            <p>Una emisora al servicio de la comunidad cat√≥lica de Concepci√≥n, Tucum√°n</p>
            <p style="margin-top: 10px; font-size: 0.8rem; opacity: 0.7;">
                <i class="fas fa-handshake"></i> En colaboraci√≥n con IAM - Infancia y Adolescencia Misionera
            </p>
        </div>
    </footer>

    <!-- Modal para juegos -->
    <div class="modal" id="gameModal">
        <div class="modal-content game-modal">
            <button class="modal-close" id="closeGameModal">&times;</button>
            <div class="modal-header" id="gameModalHeader">
                <h3><i class="fas fa-gamepad"></i> Juego en Vivo</h3>
            </div>
            <div class="game-content" id="gameContent">
                <!-- Aqu√≠ se carga el juego activo -->
            </div>
        </div>
    </div>

    <!-- Modal de login para admin de radio -->
    <div class="modal" id="radioLoginModal">
        <div class="modal-content login-modal">
            <button class="modal-close" id="cancelRadioLogin">&times;</button>
            <div class="modal-icon">
                <i class="fas fa-broadcast-tower"></i>
            </div>
            <h3>Acceso Animador de Radio</h3>
            <p>Usa las mismas credenciales del sistema IAM</p>
            
            <form id="radioLoginForm">
                <div class="form-group">
                    <label for="radioUsername"><i class="fas fa-user"></i> Usuario</label>
                    <input type="text" id="radioUsername" name="username" required placeholder="admin" value="admin">
                </div>
                
                <div class="form-group">
                    <label for="radioPassword"><i class="fas fa-key"></i> Contrase√±a</label>
                    <input type="password" id="radioPassword" name="password" required placeholder="admin123" value="admin123">
                </div>
                
                <div class="form-group">
                    <label for="radioAdminCode"><i class="fas fa-lock"></i> C√≥digo Secreto</label>
                    <input type="password" id="radioAdminCode" name="adminCode" required placeholder="IAM2026" value="IAM2026">
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Ingresar al Panel de Control
                </button>
            </form>
            
            <div style="margin-top: 20px; font-size: 0.9rem; color: var(--text-light); text-align: center;">
                <p><strong>Credenciales de prueba:</strong></p>
                <p>Usuario: <code>admin</code> | Contrase√±a: <code>admin123</code></p>
                <p>C√≥digo: <code>IAM2026</code></p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <!-- En el body, antes de cerrar </body> -->
    <script src="firebase-config.js"></script>
    <script src="radio-firebase.js"></script>
    <script src="radio-script-simple.js"></script>
    <script type="module" src="radio-game-sync.js"></script>

    <script>
        // Inicializaci√≥n adicional
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar botones de cerrar modales
            const cancelLogin = document.getElementById('cancelRadioLogin');
            const loginModal = document.getElementById('radioLoginModal');

            if (cancelLogin && loginModal) {
                cancelLogin.onclick = function() {
                    loginModal.style.display = 'none';
                };
            }
        });
    </script>
<script>
document.getElementById("joinGameBtn").onclick = () => {
  const nombre = prompt("Tu nombre");

  if (!nombre) return;

  const uid = crypto.randomUUID();
  joinGame(uid, nombre);
};
</script>

</body>
</html>